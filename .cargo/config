[unstable]
build-std = ["core", "compiler_builtins"]
build-std-features = ["compiler-builtins-mem"]

[build]
target = "thumbv6m-none-eabi"

[target.thumbv6m-none-eabi]
rustflags = [
  "-C", "relocation-model=ropi",
  "-C", "link-arg=-Tscript.ld",
]
runner = "speculos.py --display qt -k 2.0"

[target.nanos]
runner = "speculos.py --display qt -k 2.0"

[alias]
build-nanos = "build --release -Z build-std=core --target=nanos.json"
run-nanos = "run --release -Z build-std=core --target=nanos.json"
test-nanos = "test -Z build-std=core --target=nanos.json"
stackcheck = "stack-sizes --release --bin rust-app --target=thumbv6m-none-eabi"
